<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mycom.enjoytrip.search.dao.AttractionDao">

	<select id="sidoList" resultType="com.mycom.enjoytrip.search.dto.SidoGugunDto">
		select sido_code, sido_name 
		  from sido
	</select>
	
	<select id="gugunList" parameterType="int" resultType="com.mycom.enjoytrip.search.dto.SidoGugunDto">
		select gugun_code, gugun_name, sido_code 
		  from gugun
		 where sido_code = #{sidoCode}
	</select>
	
	
	<!-- 관광지 목록 -->
	<!-- 지역별 관광지 정보 목록 (시도) -->
	<select id="attractionListBySido" parameterType="int" resultType="com.mycom.enjoytrip.search.dto.SearchAttractionDto">
		select content_id, title, addr1, addr2, first_image, sido_code, gugun_code, latitude, longitude
		  from attraction_info
		 where sido_code = #{sidoCode}
	</select>
	
	<!-- 지역별 관광지 정보 목록 (시도, 구군) -->
	<select id="attractionListBySidoGugun" parameterType="map" resultType="com.mycom.enjoytrip.search.dto.SearchAttractionDto">
		select content_id, title, addr1, addr2, first_image, sido_code, gugun_code, latitude, longitude
		  from attraction_info
		 where sido_code = #{sidoCode} and gugun_code = #{gugunCode}
	</select>
	
	<!-- (분류코드) 별 관광지 정보 목록 -->
	<select id="attractionListByContentTypeId" parameterType="int" resultType="com.mycom.enjoytrip.search.dto.SearchAttractionDto">
		select content_id, title, addr1, addr2, first_image, sido_code, gugun_code, latitude, longitude
		  from attraction_info
		 where content_type_id = #{contentTypeId}
	</select>
	
	<!-- (시도 + 분류코드) 별 관광지 정보 목록 -->
	<select id="attractionListBySidoContentTypeId" parameterType="map" resultType="com.mycom.enjoytrip.search.dto.SearchAttractionDto">
		select content_id, title, addr1, addr2, first_image, sido_code, gugun_code, latitude, longitude
		  from attraction_info
		 where sido_code = #{sidoCode}
		   and content_type_id = #{contentTypeId}
	</select>
	
	<!-- ((시도+구군) + 분류코드) 별 관광지 정보 목록 -->
	<select id="attractionListBySidoGugunContentTypeId" parameterType="map" resultType="com.mycom.enjoytrip.search.dto.SearchAttractionDto">
		select content_id, title, addr1, addr2, first_image, sido_code, gugun_code, latitude, longitude
		  from attraction_info
		 where content_type_id = #{contentTypeId}
		   and sido_code = #{sidoCode} and gugun_code = #{gugunCode}
	</select>
	
	
	<!-- 관광지 목록 갯수 카운트 -->
	<!-- 지역별 관광지 정보 목록 (시도) -->
	<select id="totalCountBySido" parameterType="int" resultType="int">
		select count(*)
		  from attraction_info
		 where sido_code = #{sidoCode}
	</select>
	
	<!-- 지역별 관광지 정보 목록 (시도, 구군) -->
	<select id="totalCountBySidoGugun" parameterType="map" resultType="int">
		select count(*)
		  from attraction_info
		 where sido_code = #{sidoCode} and gugun_code = #{gugunCode}
	</select>
	
	<!-- (분류코드) 별 관광지 정보 목록 -->
	<select id="totalCountByContentTypeId" parameterType="int" resultType="int">
		select count(*)
		  from attraction_info
		 where content_type_id = #{contentTypeId}
	</select>
	
	<!-- (시도 + 분류코드) 별 관광지 정보 목록 -->
	<select id="totalCountBySidoContentTypeId" parameterType="map" resultType="int">
		select count(*)
		  from attraction_info
		 where sido_code = #{sidoCode}
		   and content_type_id = #{contentTypeId}
	</select>
	
	<!-- ((시도+구군) + 분류코드) 별 관광지 정보 목록 -->
	<select id="totalCountBySidoGugunContentTypeId" parameterType="map" resultType="int">
		select count(*)
		  from attraction_info
		 where content_type_id = #{contentTypeId}
		   and sido_code = #{sidoCode} and gugun_code = #{gugunCode}
	</select>

	
	
	<!-- 관광지 상세 정보 (한 개) -->
	<select id="attractionDetail" parameterType="int" resultType="com.mycom.enjoytrip.search.dto.SearchAttractionDto">
		select i.content_id, i.title, i.addr1, i.addr2, i.first_image, i.sido_code, i.gugun_code, i.latitude, i.longitude, d.overview
  		  from attraction_info i, attraction_description d
		 where i.content_id = #{contentId} and i.content_id = d.content_id
	</select>
	
</mapper>
