<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="author" content="Untree.co" />
    <link rel="shortcut icon" href="favicon.png" />

    <meta name="description" content />
    <meta name="keywords" content="bootstrap, bootstrap4" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Source+Serif+Pro:wght@400;700&display=swap"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/owl.carousel.min.css" />
    <link rel="stylesheet" href="css/owl.theme.default.min.css" />
    <link rel="stylesheet" href="css/jquery.fancybox.min.css" />
    <link rel="stylesheet" href="fonts/icomoon/style.css" />
    <link rel="stylesheet" href="fonts/flaticon/font/flaticon.css" />
    <link rel="stylesheet" href="css/daterangepicker.css" />
    <link rel="stylesheet" href="css/aos.css" />
    <link rel="stylesheet" href="css/style.css" />

    <title>EnjoyTrip</title>
  </head>
  <body>
    <!-- navbar -->
    <nav class="site-nav">
      <div class="container">
        <div class="site-navigation">
          <a href="/main" class="logo m-0">Tour <span class="text-primary">.</span></a>

          <ul class="js-clone-nav d-none d-lg-inline-block text-left site-menu float-right">
            <li class="active"><a href="/">Home</a></li>
            <li><a href="board/boardMain.html">Board</a></li>
            <li><a href="#">Search</a></li>
            <li><a href="map/map.html">Map</a></li>

            <!-- User 기능  -->
            <li><a href="login.html">Sign In</a></li>
            <li class="has-children">
              <a href="#">My Page</a>
              <ul class="dropdown">
                <li><a href="mypage.html">My Info</a></li>
                <li><a href="#">Bookmark</a></li>
                <li><a href="/goLogout">Logout</a></li>
              </ul>
            </li>
          </ul>

          <a
            href="#"
            class="burger ml-auto float-right site-menu-toggle js-menu-toggle d-inline-block d-lg-none light"
            data-toggle="collapse"
            data-target="#main-navbar"
          >
            <span></span>
          </a>
        </div>
      </div>
    </nav>

    <!-- 회원 가입 form -->
    <div class="hero hero-inner">
      <div class="container">
        <div class="row align-items-center">
          <div class="col-lg-6 mx-auto text-center">
            <div class="intro-wrap">
              <h1 class="mb-0">regist</h1>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="untree_co-section">
      <div class="container justify-content-center">
        <div class="row">
          <div class="col">
            <div class="p-5">
              <div class="text-center">
                <h1 class="h2 text-gray-900 mb-4">Create an Account!</h1>
              </div>
              <form class="user">
                <div class="form-group">
                  <div class="mb-sm-0">
                    <input type="text" class="form-control form-control-user" id="userNm" name="userNm" placeholder="Name" />
                  </div>
                </div>
                <div class="form-group">
                  <input type="email" class="form-control form-control-user" id="userEmail" name="userEmail" placeholder="Email Address for Id" />
                </div>
                <div class="form-group row">
                  <div class="col-sm-6 mb-3 mb-sm-0">
                    <input type="password" class="form-control form-control-user" id="userPwd" name="userPwd" placeholder="Password" />
                  </div>
                  <div class="col-sm-6">
                    <input type="password" class="form-control form-control-user" id="userRepeatPwd" name="userRepeatPwd" placeholder="Repeat Password" />
                  </div>
                </div>
                <button class="login-btn btn btn-primary btn-user btn-block" id="btnRegist" type="button">회원가입</button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  <script>
    window.onload = function () {
      // button evetn handler
      document.querySelector("#btnRegist").onclick = regist;
    };

    async function regist() {
      let user = {
        userNm: document.querySelector("#userNm").value,
        userEmail: document.querySelector("#userEmail").value,
        userPwd: document.querySelector("#userPwd").value,
      };

      let urlParams = new URLSearchParams(user);
      let fetchOptions = {
        method: "POST",
        body: urlParams,
      };

      try {
        let response = await fetch("/users", fetchOptions);
        let data = await response.json();
        console.log(data);
        console.log("회원 가입 성공!!");

        // login 페이지로 이동 구현!!
      } catch (error) {
        console.log("회원 가입 실패!!");
        console.log(error);
      }
    }
  </script>
</html>
